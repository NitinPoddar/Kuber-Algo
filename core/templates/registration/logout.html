{% extends "core/base.html" %}

{% block content %}
<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-6-tablet is-5-desktop">
        <div class="box has-text-centered">

          <div class="notification is-success is-light">
            <strong>You’ve been logged out successfully.</strong>
          </div>

          <h2 class="title is-5 mt-3">Redirecting to login in
            <span id="countdown" aria-live="polite">5</span>s…
          </h2>

          <div class="buttons is-centered mt-5">
            <a class="button is-link is-medium" href="{% url 'login' %}">
              Go to Login now
            </a>
            <a class="button is-light is-medium" href="{% url 'signup' %}">
              Create a new account
            </a>
          </div>

          <noscript>
            <p class="mt-4">
              JavaScript is disabled — please click
              <a href="{% url 'login' %}">here</a> to login.
            </p>
          </noscript>

        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Change this to adjust delay (in seconds)
  const REDIRECT_SECONDS = 5;
  const targetUrl = "{% url 'login' %}";
  const el = document.getElementById('countdown');

  let remaining = REDIRECT_SECONDS;
  el.textContent = remaining;

  const tick = () => {
    remaining -= 1;
    if (remaining <= 0) {
      window.location.href = targetUrl;
      return;
    }
    el.textContent = remaining;
  };

  setTimeout(() => {
    tick();
    const timer = setInterval(() => {
      if (remaining <= 0) { clearInterval(timer); return; }
      tick();
    }, 1000);
  }, 1000);
</script>
{% endblock %}
